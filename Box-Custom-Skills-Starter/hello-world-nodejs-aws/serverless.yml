# For full Serverless config options, check the docs:
#    https://serverless.com/framework/docs/providers/aws/guide/serverless.yml/

service: box-custom-skill-nodejs

provider:
  name: aws
  runtime: nodejs12
  timeout: 60 # 1 min
  versionFunctions: true # maintains past versions in single deployment

# overwriting defaults
  stage: ${opt:stage, 'dev'}
  region: us-east-2

# service wide environment variables
  environment:
    BOX_API_ENDPOINT: https://api.box.com/2.0
    DEBUG: ${opt:debug, 'true'}
    BOX_SKILLS_IBM_SPEECH_TO_TEXT_KEYWORDS_CALLBACK_ENDPOINT: { "Fn::Join" : ["", [ "https://", { "Ref" : "ApiGatewayRestApi" }, ".execute-api.${self:provider.region}.amazonaws.com/${self:provider.stage}/${self:service}" ] ]  }


# packaging information
package:
  artifact: ./custom-skill-nodejs.zip

functions:
  skill:
    handler: intrinsic.handler
    events: # The Events that trigger this Function
      - http:
          path: ${self:service}
          method: any
